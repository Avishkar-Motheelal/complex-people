<article>
  <section>
    <form class="forms" [formGroup]="form" (ngSubmit)="onSubmit()" *ngIf="form">
      <fieldset>
        <legend>Name</legend>
        <label>First Name</label>
        <input type="text" formControlName="firstName"
               [ngClass]="{ 'is-invalid': submitted && formControls['firstName'].errors }"/>
        <div *ngIf="submitted && formControls['firstName'].errors" class="invalid-feedback">
          <div *ngIf="formControls['firstName'].errors?.['required']">First Name is required</div>
        </div>

        <label>Last Name</label>
        <input type="text" formControlName="lastName"
               [ngClass]="{ 'is-invalid': submitted && formControls['lastName'].errors }"/>
        <div *ngIf="submitted && formControls['lastName'].errors" class="invalid-feedback">
          <div *ngIf="formControls['lastName'].errors?.['required']">Last Name is required</div>
        </div>
      </fieldset>
      <fieldset>
        <legend>Contact Details</legend>
        <label>Contact Number</label>
        <input type="text" formControlName="phoneNumber"
               [ngClass]="{ 'is-invalid': submitted && formControls['phoneNumber'].errors }"/>
        <div *ngIf="submitted && formControls['phoneNumber'].errors" class="invalid-feedback">
          <div *ngIf="formControls['phoneNumber'].errors?.['required']">Email is required</div>
        </div>

        <label>Contact Email</label>
        <input type="text" formControlName="email"
               [ngClass]="{ 'is-invalid': submitted && formControls['email'].errors }"/>
        <div *ngIf="submitted && formControls['email'].errors" class="invalid-feedback">
          <div *ngIf="formControls['email'].errors?.['required']">Email is required</div>
        </div>
      </fieldset>
      <fieldset>
        <legend>Identity Document</legend>
        <label class="radio-description">Type</label>
        <label class="radio-label">ID</label>
        <input class="radio" type="radio" formControlName="type" value="ID"
               [ngClass]="{ 'is-invalid': submitted && formControls['type'].errors }"/>
        <label class="radio-label">Passport</label>
        <input class="radio" type="radio" formControlName="type" value="PASSPORT"
               [ngClass]="{ 'is-invalid': submitted && formControls['type'].errors }"/>

        <div *ngIf="submitted && formControls['type'].errors" class="invalid-feedback">
          <div *ngIf="formControls['type'].errors?.['required']">Identity document type is required</div>
        </div>

        <label class="radio-description">Number</label>
        <input type="text" formControlName="number"
               [ngClass]="{ 'is-invalid': submitted && formControls['number'].errors }"/>
        <div *ngIf="submitted && formControls['number'].errors" class="invalid-feedback">
          <div *ngIf="formControls['number'].errors?.['required']">Email is required</div>
        </div>
      </fieldset>

    </form>
    <button [disabled]="loading">
      Save Changes
    </button>
  </section>

  <section>
    <h2>Access Cards Registered for {{person?.firstName}}</h2>
    <section class="card" *ngFor="let card of cards">
      <p><em>UUID:</em> {{card.accessCardId}}</p>
      <p><em>Status:</em> {{card.activated === true ? "Activated" : "Disabled"}}</p>
      <button (click)="disableCard(card.accessCardId)">Deactivate Card</button>
    </section>
    <button (click)="addCard()" type="button">Add new Card</button>
  </section>
</article>
